{
  "$schema": "https://sse-hooks.vercel.app/api/registry/schema/hook.json",
  "name": "use-fork-ref",
  "type": "registry:hook",
  "title": "useForkRef",
  "description": "Merges refs into a single memoized callback ref or `null`. ```tsx const rootRef = React.useRef<Instance>(null); const refFork = useForkRef(rootRef, props.ref); return (   <Root {...props} ref={refFork} /> ); ```",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [],
  "file": {
    "content": "import React from \"react\";\n\nexport function useForkRef<Instance>(\n  ...refs: Array<React.Ref<Instance> | undefined>\n): React.RefCallback<Instance> | null {\n  const cleanupRef = React.useRef<() => void>(undefined);\n\n  const refEffect = React.useCallback((instance: Instance) => {\n    const cleanups = refs.map((ref) => {\n      if (ref == null) {\n        return null;\n      }\n\n      if (typeof ref === \"function\") {\n        const refCallback = ref;\n        const refCleanup: void | (() => void) = refCallback(instance);\n        return typeof refCleanup === \"function\"\n          ? refCleanup\n          : () => {\n              refCallback(null);\n            };\n      }\n\n      ref.current = instance;\n      return () => {\n        ref.current = null;\n      };\n    });\n\n    return () => {\n      cleanups.forEach((refCleanup) => refCleanup?.());\n    };\n  }, refs);\n\n  return React.useMemo(() => {\n    if (refs.every((ref) => ref == null)) {\n      return null;\n    }\n\n    return (value) => {\n      if (cleanupRef.current) {\n        cleanupRef.current();\n        cleanupRef.current = undefined;\n      }\n\n      if (value != null) {\n        cleanupRef.current = refEffect(value);\n      }\n    };\n  }, refs);\n}\n",
    "js": "import React from \"react\";\nexport function useForkRef(...refs) {\n    const cleanupRef = React.useRef(undefined);\n    const refEffect = React.useCallback((instance) => {\n        const cleanups = refs.map((ref) => {\n            if (ref == null) {\n                return null;\n            }\n            if (typeof ref === \"function\") {\n                const refCallback = ref;\n                const refCleanup = refCallback(instance);\n                return typeof refCleanup === \"function\"\n                    ? refCleanup\n                    : () => {\n                        refCallback(null);\n                    };\n            }\n            ref.current = instance;\n            return () => {\n                ref.current = null;\n            };\n        });\n        return () => {\n            cleanups.forEach((refCleanup) => refCleanup?.());\n        };\n    }, refs);\n    return React.useMemo(() => {\n        if (refs.every((ref) => ref == null)) {\n            return null;\n        }\n        return (value) => {\n            if (cleanupRef.current) {\n                cleanupRef.current();\n                cleanupRef.current = undefined;\n            }\n            if (value != null) {\n                cleanupRef.current = refEffect(value);\n            }\n        };\n    }, refs);\n}"
  }
}