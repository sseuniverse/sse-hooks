{
  "$schema": "https://raw.githubusercontent.com/sseuniverse/sse-hooks/refs/heads/main/schema/meta.json",
  "name": "use-network-information",
  "type": "registry:hook",
  "title": "useNetworkInformation",
  "description": "Detailed information about the network connection.",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [],
  "file": {
    "content": "export interface NetworkInformation {\n  downlink?: number;\n  downlinkMax?: number;\n  effectiveType?: \"2g\" | \"3g\" | \"4g\" | \"slow-2g\";\n  rtt?: number;\n  saveData?: boolean;\n  type?:\n    | \"bluetooth\"\n    | \"cellular\"\n    | \"ethernet\"\n    | \"none\"\n    | \"wifi\"\n    | \"wimax\"\n    | \"other\"\n    | \"unknown\";\n}\n\nexport interface UseNetworkInformationReturn {\n  networkInfo: NetworkInformation | null;\n\n  isOnline: boolean;\n\n  isSupported: boolean;\n\n  refresh: () => void;\n}\n\nimport { useCallback, useEffect, useState } from \"react\";\n\ndeclare global {\n  interface Navigator {\n    connection?: NetworkInformation;\n  }\n}\n\nexport const useNetworkInformation = (): UseNetworkInformationReturn => {\n  const [networkInfo, setNetworkInfo] = useState<NetworkInformation | null>(\n    null,\n  );\n\n  const [isOnline, setIsOnline] = useState<boolean>(\n    typeof navigator !== \"undefined\" ? navigator.onLine : true,\n  );\n\n  const isSupported =\n    typeof navigator !== \"undefined\" &&\n    \"connection\" in navigator &&\n    navigator.connection !== undefined;\n\n  const updateNetworkInfo = useCallback(() => {\n    if (!isSupported || !navigator.connection) return;\n\n    const connection = navigator.connection;\n\n    setNetworkInfo({\n      downlink: connection.downlink,\n      downlinkMax: connection.downlinkMax,\n      effectiveType: connection.effectiveType,\n      rtt: connection.rtt,\n      saveData: connection.saveData,\n      type: connection.type,\n    });\n  }, [isSupported]);\n\n  const handleOnlineStatusChange = useCallback(() => {\n    setIsOnline(navigator.onLine);\n  }, []);\n\n  const handleConnectionChange = useCallback(() => {\n    updateNetworkInfo();\n  }, [updateNetworkInfo]);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    updateNetworkInfo();\n\n    window.addEventListener(\"online\", handleOnlineStatusChange);\n    window.addEventListener(\"offline\", handleOnlineStatusChange);\n\n    if (isSupported) {\n      const connection = (navigator as any).connection;\n      connection.addEventListener(\"change\", handleConnectionChange);\n    }\n\n    return () => {\n      window.removeEventListener(\"online\", handleOnlineStatusChange);\n      window.removeEventListener(\"offline\", handleOnlineStatusChange);\n\n      if (isSupported) {\n        const connection = (navigator as any).connection;\n        connection.removeEventListener(\"change\", handleConnectionChange);\n      }\n    };\n  }, [\n    isSupported,\n    updateNetworkInfo,\n    handleOnlineStatusChange,\n    handleConnectionChange,\n  ]);\n\n  return {\n    networkInfo,\n    isOnline,\n    isSupported,\n    refresh: updateNetworkInfo,\n  };\n};\n",
    "js": "import { useCallback, useEffect, useState } from \"react\";\nexport const useNetworkInformation = () => {\n    const [networkInfo, setNetworkInfo] = useState(null);\n    const [isOnline, setIsOnline] = useState(typeof navigator !== \"undefined\" ? navigator.onLine : true);\n    const isSupported = typeof navigator !== \"undefined\" &&\n        \"connection\" in navigator &&\n        navigator.connection !== undefined;\n    const updateNetworkInfo = useCallback(() => {\n        if (!isSupported || !navigator.connection)\n            return;\n        const connection = navigator.connection;\n        setNetworkInfo({\n            downlink: connection.downlink,\n            downlinkMax: connection.downlinkMax,\n            effectiveType: connection.effectiveType,\n            rtt: connection.rtt,\n            saveData: connection.saveData,\n            type: connection.type,\n        });\n    }, [isSupported]);\n    const handleOnlineStatusChange = useCallback(() => {\n        setIsOnline(navigator.onLine);\n    }, []);\n    const handleConnectionChange = useCallback(() => {\n        updateNetworkInfo();\n    }, [updateNetworkInfo]);\n    useEffect(() => {\n        if (typeof window === \"undefined\")\n            return;\n        updateNetworkInfo();\n        window.addEventListener(\"online\", handleOnlineStatusChange);\n        window.addEventListener(\"offline\", handleOnlineStatusChange);\n        if (isSupported) {\n            const connection = navigator.connection;\n            connection.addEventListener(\"change\", handleConnectionChange);\n        }\n        return () => {\n            window.removeEventListener(\"online\", handleOnlineStatusChange);\n            window.removeEventListener(\"offline\", handleOnlineStatusChange);\n            if (isSupported) {\n                const connection = navigator.connection;\n                connection.removeEventListener(\"change\", handleConnectionChange);\n            }\n        };\n    }, [\n        isSupported,\n        updateNetworkInfo,\n        handleOnlineStatusChange,\n        handleConnectionChange,\n    ]);\n    return {\n        networkInfo,\n        isOnline,\n        isSupported,\n        refresh: updateNetworkInfo,\n    };\n};"
  }
}