{
  "$schema": "https://raw.githubusercontent.com/sseuniverse/sse-hooks/refs/heads/main/schema/meta.json",
  "name": "use-network-information",
  "type": "registry:hook",
  "title": "useNetworkInformation",
  "description": "",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [],
  "file": {
    "content": "export interface NetworkInformation {\r\n  downlink?: number;\r\n  downlinkMax?: number;\r\n  effectiveType?: \"2g\" | \"3g\" | \"4g\" | \"slow-2g\";\r\n  rtt?: number;\r\n  saveData?: boolean;\r\n  type?:\r\n    | \"bluetooth\"\r\n    | \"cellular\"\r\n    | \"ethernet\"\r\n    | \"none\"\r\n    | \"wifi\"\r\n    | \"wimax\"\r\n    | \"other\"\r\n    | \"unknown\";\r\n}\r\n\r\nexport interface UseNetworkInformationReturn {\r\n  networkInfo: NetworkInformation | null;\r\n  isOnline: boolean;\r\n  isSupported: boolean;\r\n  refresh: () => void;\r\n}\r\n\nimport { useCallback, useEffect, useState } from \"react\";\r\n\ndeclare global {\r\n  interface Navigator {\r\n    connection?: NetworkInformation;\r\n  }\r\n}\r\n\r\nexport const useNetworkInformation = (): UseNetworkInformationReturn => {\r\n  const [networkInfo, setNetworkInfo] = useState<NetworkInformation | null>(\r\n    null,\r\n  );\r\n\r\n  const [isOnline, setIsOnline] = useState<boolean>(\r\n    typeof navigator !== \"undefined\" ? navigator.onLine : true,\r\n  );\r\n\r\n  const isSupported =\r\n    typeof navigator !== \"undefined\" &&\r\n    \"connection\" in navigator &&\r\n    navigator.connection !== undefined;\r\n\r\n  const updateNetworkInfo = useCallback(() => {\r\n    if (!isSupported || !navigator.connection) return;\r\n\r\n    const connection = navigator.connection;\r\n\r\n    setNetworkInfo({\r\n      downlink: connection.downlink,\r\n      downlinkMax: connection.downlinkMax,\r\n      effectiveType: connection.effectiveType,\r\n      rtt: connection.rtt,\r\n      saveData: connection.saveData,\r\n      type: connection.type,\r\n    });\r\n  }, [isSupported]);\r\n\r\n  const handleOnlineStatusChange = useCallback(() => {\r\n    setIsOnline(navigator.onLine);\r\n  }, []);\r\n\r\n  const handleConnectionChange = useCallback(() => {\r\n    updateNetworkInfo();\r\n  }, [updateNetworkInfo]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    updateNetworkInfo();\r\n\r\n    window.addEventListener(\"online\", handleOnlineStatusChange);\r\n    window.addEventListener(\"offline\", handleOnlineStatusChange);\r\n\r\n    if (isSupported) {\r\n      const connection = (navigator as any).connection;\r\n      connection.addEventListener(\"change\", handleConnectionChange);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"online\", handleOnlineStatusChange);\r\n      window.removeEventListener(\"offline\", handleOnlineStatusChange);\r\n\r\n      if (isSupported) {\r\n        const connection = (navigator as any).connection;\r\n        connection.removeEventListener(\"change\", handleConnectionChange);\r\n      }\r\n    };\r\n  }, [\r\n    isSupported,\r\n    updateNetworkInfo,\r\n    handleOnlineStatusChange,\r\n    handleConnectionChange,\r\n  ]);\r\n\r\n  return {\r\n    networkInfo,\r\n    isOnline,\r\n    isSupported,\r\n    refresh: updateNetworkInfo,\r\n  };\r\n};",
    "js": "import { useCallback, useEffect, useState } from \"react\";\nexport const useNetworkInformation = () => {\n    const [networkInfo, setNetworkInfo] = useState(null);\n    const [isOnline, setIsOnline] = useState(typeof navigator !== \"undefined\" ? navigator.onLine : true);\n    const isSupported = typeof navigator !== \"undefined\" &&\n        \"connection\" in navigator &&\n        navigator.connection !== undefined;\n    const updateNetworkInfo = useCallback(() => {\n        if (!isSupported || !navigator.connection)\n            return;\n        const connection = navigator.connection;\n        setNetworkInfo({\n            downlink: connection.downlink,\n            downlinkMax: connection.downlinkMax,\n            effectiveType: connection.effectiveType,\n            rtt: connection.rtt,\n            saveData: connection.saveData,\n            type: connection.type,\n        });\n    }, [isSupported]);\n    const handleOnlineStatusChange = useCallback(() => {\n        setIsOnline(navigator.onLine);\n    }, []);\n    const handleConnectionChange = useCallback(() => {\n        updateNetworkInfo();\n    }, [updateNetworkInfo]);\n    useEffect(() => {\n        if (typeof window === \"undefined\")\n            return;\n        updateNetworkInfo();\n        window.addEventListener(\"online\", handleOnlineStatusChange);\n        window.addEventListener(\"offline\", handleOnlineStatusChange);\n        if (isSupported) {\n            const connection = navigator.connection;\n            connection.addEventListener(\"change\", handleConnectionChange);\n        }\n        return () => {\n            window.removeEventListener(\"online\", handleOnlineStatusChange);\n            window.removeEventListener(\"offline\", handleOnlineStatusChange);\n            if (isSupported) {\n                const connection = navigator.connection;\n                connection.removeEventListener(\"change\", handleConnectionChange);\n            }\n        };\n    }, [\n        isSupported,\n        updateNetworkInfo,\n        handleOnlineStatusChange,\n        handleConnectionChange,\n    ]);\n    return {\n        networkInfo,\n        isOnline,\n        isSupported,\n        refresh: updateNetworkInfo,\n    };\n};"
  }
}