{
  "$schema": "https://raw.githubusercontent.com/sseuniverse/sse-hooks/refs/heads/main/schema/meta.json",
  "name": "use-debounce-callback",
  "type": "registry:hook",
  "title": "useDebounceCallback",
  "description": "Configuration options for controlling the behavior of the debounced function.",
  "dependencies": [
    "react",
    "lodash.debounce"
  ],
  "registryDependencies": [
    "use-unmount"
  ],
  "file": {
    "content": "import { useEffect, useMemo, useRef } from \"react\";\r\n\r\nimport debounce from \"lodash.debounce\";\r\n\r\n\n\r\ntype DebounceOptions = {\r\n  \r\n  leading?: boolean;\r\n  \r\n  trailing?: boolean;\r\n  \r\n  maxWait?: number;\r\n};\r\n\r\n\r\ntype ControlFunctions = {\r\n  \r\n  cancel: () => void;\r\n  \r\n  flush: () => void;\r\n  \r\n  isPending: () => boolean;\r\n};\r\n\r\n\r\n\r\nexport type DebouncedState<T extends (...args: any) => ReturnType<T>> = ((\r\n  ...args: Parameters<T>\r\n) => ReturnType<T> | undefined) &\r\n  ControlFunctions;\r\n\r\n\r\n\r\nexport function useDebounceCallback<T extends (...args: any) => ReturnType<T>>(\r\n  func: T,\r\n  delay = 500,\r\n  options?: DebounceOptions,\r\n): DebouncedState<T> {\r\n  \r\n  const debouncedFunc = useRef<ReturnType<typeof debounce>>();\r\n\r\n  useUnmount(() => {\r\n    if (debouncedFunc.current) {\r\n      debouncedFunc.current.cancel();\r\n    }\r\n  });\r\n\r\n  const debounced = useMemo(() => {\r\n    const debouncedFuncInstance = debounce(func, delay, options);\r\n\r\n    const wrappedFunc: DebouncedState<T> = (...args: Parameters<T>) => {\r\n      return debouncedFuncInstance(...args);\r\n    };\r\n\r\n    wrappedFunc.cancel = () => {\r\n      debouncedFuncInstance.cancel();\r\n    };\r\n\r\n    wrappedFunc.isPending = () => {\r\n      return !!debouncedFunc.current;\r\n    };\r\n\r\n    wrappedFunc.flush = () => {\r\n      return debouncedFuncInstance.flush();\r\n    };\r\n\r\n    return wrappedFunc;\r\n  }, [func, delay, options]);\r\n\r\n  \r\n  useEffect(() => {\r\n    debouncedFunc.current = debounce(func, delay, options);\r\n  }, [func, delay, options]);\r\n\r\n  return debounced;\r\n}",
    "js": "import { useEffect, useMemo, useRef } from \"react\";\nimport debounce from \"lodash.debounce\";\nexport function useDebounceCallback(func, delay = 500, options) {\n    const debouncedFunc = useRef();\n    useUnmount(() => {\n        if (debouncedFunc.current) {\n            debouncedFunc.current.cancel();\n        }\n    });\n    const debounced = useMemo(() => {\n        const debouncedFuncInstance = debounce(func, delay, options);\n        const wrappedFunc = (...args) => {\n            return debouncedFuncInstance(...args);\n        };\n        wrappedFunc.cancel = () => {\n            debouncedFuncInstance.cancel();\n        };\n        wrappedFunc.isPending = () => {\n            return !!debouncedFunc.current;\n        };\n        wrappedFunc.flush = () => {\n            return debouncedFuncInstance.flush();\n        };\n        return wrappedFunc;\n    }, [func, delay, options]);\n    useEffect(() => {\n        debouncedFunc.current = debounce(func, delay, options);\n    }, [func, delay, options]);\n    return debounced;\n}"
  }
}