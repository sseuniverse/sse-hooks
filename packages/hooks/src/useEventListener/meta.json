{
  "$schema": "https://raw.githubusercontent.com/sseuniverse/sse-hooks/refs/heads/main/schema/meta.json",
  "name": "use-event-listener",
  "type": "registry:hook",
  "title": "useEventListener",
  "description": "Custom hook that attaches event listeners to DOM elements, the window, or media query lists. ```tsx // Example 1: Attach a window event listener useEventListener('resize', handleResize); ``` ```tsx // Example 2: Attach a document event listener with options const elementRef = useRef(document); useEventListener('click', handleClick, elementRef, { capture: true }); ``` ```tsx // Example 3: Attach an element event listener const buttonRef = useRef<HTMLButtonElement>(null); useEventListener('click', handleButtonClick, buttonRef); ```",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [
    "use-isomorphic-layout-effect"
  ],
  "file": {
    "content": "import { useEffect, useRef } from \"react\";\r\n\r\nimport type { RefObject } from \"react\";\r\n\r\n\n\r\nfunction useEventListener<K extends keyof MediaQueryListEventMap>(\r\n  eventName: K,\r\n  handler: (event: MediaQueryListEventMap[K]) => void,\r\n  element: RefObject<MediaQueryList>,\r\n  options?: boolean | AddEventListenerOptions,\r\n): void;\r\n\r\n\r\nfunction useEventListener<K extends keyof WindowEventMap>(\r\n  eventName: K,\r\n  handler: (event: WindowEventMap[K]) => void,\r\n  element?: undefined,\r\n  options?: boolean | AddEventListenerOptions,\r\n): void;\r\n\r\n\r\nfunction useEventListener<\r\n  K extends keyof HTMLElementEventMap & keyof SVGElementEventMap,\r\n  T extends Element = K extends keyof HTMLElementEventMap\r\n    ? HTMLDivElement\r\n    : SVGElement,\r\n>(\r\n  eventName: K,\r\n  handler:\r\n    | ((event: HTMLElementEventMap[K]) => void)\r\n    | ((event: SVGElementEventMap[K]) => void),\r\n  element: RefObject<T>,\r\n  options?: boolean | AddEventListenerOptions,\r\n): void;\r\n\r\n\r\nfunction useEventListener<K extends keyof DocumentEventMap>(\r\n  eventName: K,\r\n  handler: (event: DocumentEventMap[K]) => void,\r\n  element: RefObject<Document>,\r\n  options?: boolean | AddEventListenerOptions,\r\n): void;\r\n\r\n\r\nfunction useEventListener<\r\n  KW extends keyof WindowEventMap,\r\n  KH extends keyof HTMLElementEventMap & keyof SVGElementEventMap,\r\n  KM extends keyof MediaQueryListEventMap,\r\n  T extends HTMLElement | SVGAElement | MediaQueryList = HTMLElement,\r\n>(\r\n  eventName: KW | KH | KM,\r\n  handler: (\r\n    event:\r\n      | WindowEventMap[KW]\r\n      | HTMLElementEventMap[KH]\r\n      | SVGElementEventMap[KH]\r\n      | MediaQueryListEventMap[KM]\r\n      | Event,\r\n  ) => void,\r\n  element?: RefObject<T>,\r\n  options?: boolean | AddEventListenerOptions,\r\n) {\r\n  \r\n  const savedHandler = useRef(handler);\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    \r\n    const targetElement: T | Window = element?.current ?? window;\r\n\r\n    if (!(targetElement && targetElement.addEventListener)) return;\r\n\r\n    \r\n    const listener: typeof handler = (event) => {\r\n      savedHandler.current(event);\r\n    };\r\n\r\n    targetElement.addEventListener(eventName, listener, options);\r\n\r\n    \r\n    return () => {\r\n      targetElement.removeEventListener(eventName, listener, options);\r\n    };\r\n  }, [eventName, element, options]);\r\n}\r\n\r\nexport { useEventListener };",
    "js": "import { useEffect, useRef } from \"react\";\nfunction useEventListener(eventName, handler, element, options) {\n    const savedHandler = useRef(handler);\n    useIsomorphicLayoutEffect(() => {\n        savedHandler.current = handler;\n    }, [handler]);\n    useEffect(() => {\n        const targetElement = element?.current ?? window;\n        if (!(targetElement && targetElement.addEventListener))\n            return;\n        const listener = (event) => {\n            savedHandler.current(event);\n        };\n        targetElement.addEventListener(eventName, listener, options);\n        return () => {\n            targetElement.removeEventListener(eventName, listener, options);\n        };\n    }, [eventName, element, options]);\n}\nexport { useEventListener };"
  }
}