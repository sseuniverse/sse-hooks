{
  "$schema": "https://raw.githubusercontent.com/sseuniverse/sse-hooks/refs/heads/main/schema/meta.json",
  "name": "use-scroll-lock",
  "type": "registry:hook",
  "title": "useScrollLock",
  "description": "Hook options.",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [
    "use-isomorphic-layout-effect"
  ],
  "file": {
    "content": "import { useRef, useState } from \"react\";\n\nimport { useIsomorphicLayoutEffect } from \"./use-isomorphic-layout-effect\";\n\ntype UseScrollLockOptions = {\n  autoLock?: boolean;\n\n  lockTarget?: HTMLElement | string;\n\n  widthReflow?: boolean;\n};\n\ntype UseScrollLockReturn = {\n  isLocked: boolean;\n\n  lock: () => void;\n\n  unlock: () => void;\n};\n\ntype OriginalStyle = {\n  overflow: CSSStyleDeclaration[\"overflow\"];\n  paddingRight: CSSStyleDeclaration[\"paddingRight\"];\n};\n\nconst IS_SERVER = typeof window === \"undefined\";\n\nexport function useScrollLock(\n  options: UseScrollLockOptions = {},\n): UseScrollLockReturn {\n  const { autoLock = true, lockTarget, widthReflow = true } = options;\n  const [isLocked, setIsLocked] = useState(false);\n  const target = useRef<HTMLElement | null>(null);\n  const originalStyle = useRef<OriginalStyle | null>(null);\n\n  const lock = () => {\n    if (target.current) {\n      const { overflow, paddingRight } = target.current.style;\n\n      originalStyle.current = { overflow, paddingRight };\n\n      if (widthReflow) {\n        const offsetWidth =\n          target.current === document.body\n            ? window.innerWidth\n            : target.current.offsetWidth;\n\n        const currentPaddingRight =\n          parseInt(window.getComputedStyle(target.current).paddingRight, 10) ||\n          0;\n\n        const scrollbarWidth = offsetWidth - target.current.scrollWidth;\n        target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\n      }\n\n      target.current.style.overflow = \"hidden\";\n\n      setIsLocked(true);\n    }\n  };\n\n  const unlock = () => {\n    if (target.current && originalStyle.current) {\n      target.current.style.overflow = originalStyle.current.overflow;\n\n      if (widthReflow) {\n        target.current.style.paddingRight = originalStyle.current.paddingRight;\n      }\n    }\n\n    setIsLocked(false);\n  };\n\n  useIsomorphicLayoutEffect(() => {\n    if (IS_SERVER) return;\n\n    if (lockTarget) {\n      target.current =\n        typeof lockTarget === \"string\"\n          ? document.querySelector(lockTarget)\n          : lockTarget;\n    }\n\n    if (!target.current) {\n      target.current = document.body;\n    }\n\n    if (autoLock) {\n      lock();\n    }\n\n    return () => {\n      unlock();\n    };\n  }, [autoLock, lockTarget, widthReflow]);\n\n  return { isLocked, lock, unlock };\n}\n",
    "js": "import { useRef, useState } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./use-isomorphic-layout-effect\";\nconst IS_SERVER = typeof window === \"undefined\";\nexport function useScrollLock(options = {}) {\n    const { autoLock = true, lockTarget, widthReflow = true } = options;\n    const [isLocked, setIsLocked] = useState(false);\n    const target = useRef(null);\n    const originalStyle = useRef(null);\n    const lock = () => {\n        if (target.current) {\n            const { overflow, paddingRight } = target.current.style;\n            originalStyle.current = { overflow, paddingRight };\n            if (widthReflow) {\n                const offsetWidth = target.current === document.body\n                    ? window.innerWidth\n                    : target.current.offsetWidth;\n                const currentPaddingRight = parseInt(window.getComputedStyle(target.current).paddingRight, 10) ||\n                    0;\n                const scrollbarWidth = offsetWidth - target.current.scrollWidth;\n                target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\n            }\n            target.current.style.overflow = \"hidden\";\n            setIsLocked(true);\n        }\n    };\n    const unlock = () => {\n        if (target.current && originalStyle.current) {\n            target.current.style.overflow = originalStyle.current.overflow;\n            if (widthReflow) {\n                target.current.style.paddingRight = originalStyle.current.paddingRight;\n            }\n        }\n        setIsLocked(false);\n    };\n    useIsomorphicLayoutEffect(() => {\n        if (IS_SERVER)\n            return;\n        if (lockTarget) {\n            target.current =\n                typeof lockTarget === \"string\"\n                    ? document.querySelector(lockTarget)\n                    : lockTarget;\n        }\n        if (!target.current) {\n            target.current = document.body;\n        }\n        if (autoLock) {\n            lock();\n        }\n        return () => {\n            unlock();\n        };\n    }, [autoLock, lockTarget, widthReflow]);\n    return { isLocked, lock, unlock };\n}"
  }
}