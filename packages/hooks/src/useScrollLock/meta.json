{
  "$schema": "https://raw.githubusercontent.com/sseuniverse/sse-hooks/refs/heads/main/schema/meta.json",
  "name": "use-scroll-lock",
  "type": "registry:hook",
  "title": "useScrollLock",
  "description": "Hook options.",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [
    "use-isomorphic-layout-effect"
  ],
  "file": {
    "content": "import { useRef, useState } from \"react\";\r\n\r\n\n\r\ntype UseScrollLockOptions = {\r\n  \r\n  autoLock?: boolean;\r\n  \r\n  lockTarget?: HTMLElement | string;\r\n  \r\n  widthReflow?: boolean;\r\n};\r\n\r\n\r\ntype UseScrollLockReturn = {\r\n  \r\n  isLocked: boolean;\r\n  \r\n  lock: () => void;\r\n  \r\n  unlock: () => void;\r\n};\r\n\r\ntype OriginalStyle = {\r\n  overflow: CSSStyleDeclaration[\"overflow\"];\r\n  paddingRight: CSSStyleDeclaration[\"paddingRight\"];\r\n};\r\n\r\nconst IS_SERVER = typeof window === \"undefined\";\r\n\r\n\r\nexport function useScrollLock(\r\n  options: UseScrollLockOptions = {},\r\n): UseScrollLockReturn {\r\n  const { autoLock = true, lockTarget, widthReflow = true } = options;\r\n  const [isLocked, setIsLocked] = useState(false);\r\n  const target = useRef<HTMLElement | null>(null);\r\n  const originalStyle = useRef<OriginalStyle | null>(null);\r\n\r\n  const lock = () => {\r\n    if (target.current) {\r\n      const { overflow, paddingRight } = target.current.style;\r\n\r\n      \r\n      originalStyle.current = { overflow, paddingRight };\r\n\r\n      \r\n      if (widthReflow) {\r\n        \r\n        const offsetWidth =\r\n          target.current === document.body\r\n            ? window.innerWidth\r\n            : target.current.offsetWidth;\r\n        \r\n        const currentPaddingRight =\r\n          parseInt(window.getComputedStyle(target.current).paddingRight, 10) ||\r\n          0;\r\n\r\n        const scrollbarWidth = offsetWidth - target.current.scrollWidth;\r\n        target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\r\n      }\r\n\r\n      \r\n      target.current.style.overflow = \"hidden\";\r\n\r\n      setIsLocked(true);\r\n    }\r\n  };\r\n\r\n  const unlock = () => {\r\n    if (target.current && originalStyle.current) {\r\n      target.current.style.overflow = originalStyle.current.overflow;\r\n\r\n      \r\n      if (widthReflow) {\r\n        target.current.style.paddingRight = originalStyle.current.paddingRight;\r\n      }\r\n    }\r\n\r\n    setIsLocked(false);\r\n  };\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    if (IS_SERVER) return;\r\n\r\n    if (lockTarget) {\r\n      target.current =\r\n        typeof lockTarget === \"string\"\r\n          ? document.querySelector(lockTarget)\r\n          : lockTarget;\r\n    }\r\n\r\n    if (!target.current) {\r\n      target.current = document.body;\r\n    }\r\n\r\n    if (autoLock) {\r\n      lock();\r\n    }\r\n\r\n    return () => {\r\n      unlock();\r\n    };\r\n    \r\n  }, [autoLock, lockTarget, widthReflow]);\r\n\r\n  return { isLocked, lock, unlock };\r\n}",
    "js": "import { useRef, useState } from \"react\";\nconst IS_SERVER = typeof window === \"undefined\";\nexport function useScrollLock(options = {}) {\n    const { autoLock = true, lockTarget, widthReflow = true } = options;\n    const [isLocked, setIsLocked] = useState(false);\n    const target = useRef(null);\n    const originalStyle = useRef(null);\n    const lock = () => {\n        if (target.current) {\n            const { overflow, paddingRight } = target.current.style;\n            originalStyle.current = { overflow, paddingRight };\n            if (widthReflow) {\n                const offsetWidth = target.current === document.body\n                    ? window.innerWidth\n                    : target.current.offsetWidth;\n                const currentPaddingRight = parseInt(window.getComputedStyle(target.current).paddingRight, 10) ||\n                    0;\n                const scrollbarWidth = offsetWidth - target.current.scrollWidth;\n                target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\n            }\n            target.current.style.overflow = \"hidden\";\n            setIsLocked(true);\n        }\n    };\n    const unlock = () => {\n        if (target.current && originalStyle.current) {\n            target.current.style.overflow = originalStyle.current.overflow;\n            if (widthReflow) {\n                target.current.style.paddingRight = originalStyle.current.paddingRight;\n            }\n        }\n        setIsLocked(false);\n    };\n    useIsomorphicLayoutEffect(() => {\n        if (IS_SERVER)\n            return;\n        if (lockTarget) {\n            target.current =\n                typeof lockTarget === \"string\"\n                    ? document.querySelector(lockTarget)\n                    : lockTarget;\n        }\n        if (!target.current) {\n            target.current = document.body;\n        }\n        if (autoLock) {\n            lock();\n        }\n        return () => {\n            unlock();\n        };\n    }, [autoLock, lockTarget, widthReflow]);\n    return { isLocked, lock, unlock };\n}"
  }
}